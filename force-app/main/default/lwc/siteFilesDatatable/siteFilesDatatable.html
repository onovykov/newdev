<template>
   <c-custom-toast-lwc auto-close-time="8000"></c-custom-toast-lwc>
    <template if:true={modalDeleteFile}>
       <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open slds-modal_large">
          <div class="slds-modal__container">
             <header class="slds-modal__header slds-modal__header_empty modal-header">
                <div class="slds-grid slds-wrap slds-grid_align-end">
                   <div class="slds-col">
                      <button class="slds-button slds-button_icon slds-button_icon-inverse slds-p-around_small" title="Close" onclick={closeModal}>
                         <lightning-icon icon-name="action:remove"
                            alternative-text="close"
                            variant="inverse"
                            size="small" ></lightning-icon>
                         <span class="slds-assistive-text">Close</span>
                      </button>
                   </div>
                </div>
             </header>
             <!-- Modal/Popup Box LWC body starts here -->
             <div class="slds-modal__content modal-content" id="modal-content-id-1">
                <div class="slds-grid slds-grid_align-center slds-m-top_medium">
                   <div class="slds-col card-subheader">
                      <p>{modalText}</p>
                   </div>
                </div>
                <div class="slds-grid slds-grid_align-center slds-m-top_x-large slds-m-bottom_medium" style="gap:15px;">
                   <div class="slds-col slds-size_3-of-12 center">
                      <button class="print-btn card-subheader " onclick={closeModal}>{labels.No}</button>
                   </div>
                   <div class="slds-col slds-size_3-of-12 center">
                      <button class="print-btn card-subheader " onclick={confirmModal}>{labels.Yes}</button>
                   </div>
                </div>
             </div>
          </div>
       </section>
       <div class="slds-backdrop slds-backdrop_open"></div>
    </template>




    <div class="container">
       <div class="datatable-menu">
          
                            <div class="attach-btn" id="buttonid">
                                <input type="file" multiple
                                    class="slds-file-selector__input slds-assistive-text input-file"
                                    accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,.doc,application/pdf,image/png, image/gif, image/jpeg,text/plain"
                                    id="file-upload-input-01" onchange={handleFileSelect}
                                    aria-labelledby="file-selector-primary-label file-selector-secondary-label" />
                                <label class="slds-file-selector__body print-btn" for="file-upload-input-01"
                                    id="file-selector-secondary-label">
                                    <span
                                        class="slds-file-selector__button slds-button slds-button_neutral print-btn ">
                                        <img src={plus} alt="">
                                        <p class="print-text">{labels.Upload_file}</p>
                                    </span>
                                </label>
                            </div>
 
          <div class="calendar">
             <p class="calendar-choose-date">{chooseADate}: </p>
             <p class="calendar-from">{from}</p>
             <div class="calendar-start-date">
                <lightning-input  type ="date" onchange={setStartDate} ></lightning-input>
             </div>
             <p class="calendar-to">{to}</p>
             <div class="calendar-end-date" >
                <lightning-input type ="date"  onchange={setEndDate}></lightning-input>
             </div>
          </div>
          <div class="searchbox">
             <lightning-input class="search-input" id="textfield1" type="search"  onchange={handleSearch}></lightning-input>
             <div class="refresh-btn" onclick={refreshSearch}>
                <img  class="refresh-btn-img" src={refresh}  alt="" >
             </div>
          </div>
       </div>
       <div class="datatable">
          <table>
            <thead>
               <tr class="datatable-header">
                  <th style="text-align: left;">{labels.scf_name}</th>
                  <th>{labels.scf_owner}</th>
                  <th>{labels.scf_lastChange}</th>
                  <th>{labels.Site_th_delete}</th>
               </tr>
            </thead>
             <template for:each= {filteredFilesList} for:item="item">
                <tr key = {item.ContentDocumentId}>
                   <td data-label={labels.scf_name} style="text-align: left;" class="reclamation-number" onclick={openFile} data-id={item.Id}>{item.ContentDocument.Title}</td>
                   <td data-label={labels.scf_owner}>{item.ContentDocument.Owner.Name}</td>
                   <td data-label={labels.scf_lastChange}> 
                      <lightning-formatted-date-time
                         value= {item.ContentDocument.ContentModifiedDate}
                         year="numeric"
                         month="numeric"
                         day="numeric">
                      </lightning-formatted-date-time>
                   </td>
                   <td data-label={labels.Site_th_delete}>
                      <lightning-button-icon icon-name="utility:delete" onclick={openDeleteFileModal} data-id={item.ContentDocumentId}  alternative-text="Delete" class="slds-m-left_xx-small delete-btn" title="Delete" style="z-index: 0; position:relative;"></lightning-button-icon>
                   </td>
                </tr>
             </template>
          </table>
       </div>
    </div>

 </template>