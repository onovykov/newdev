<template>

    <div class="tab-header">
        <h1 class="tab-title">–ü–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∏</h1>
        <p class="tab-subtitle">
            –£ —Ü—ñ–π –≤–∫–ª–∞–¥—Ü—ñ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –∑ <b>–ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞–º–∏</b>.
            –õ—ñ–≤–æ—Ä—É—á –º–æ–∂–Ω–∞ –æ–±—Ä–∞—Ç–∏ –∫–æ–º–ø–∞–Ω—ñ—é (–∫–æ–º–µ—Ä—Ü—ñ–π–Ω—É —á–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É),
            –∞ —É –≤—ñ–∫–Ω—ñ –ø—Ä–∞–≤–æ—Ä—É—á –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –∫–∞—Ä—Ç–∫–∞ –∑ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏, –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏,
            –º—ñ—Å—Ü—è–º–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, –≤–æ–¥—ñ—è–º–∏, –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏ —Ç–∞ –º–∞—à–∏–Ω–∞–º–∏.
            –ù–∞—Ç–∏—Å–Ω—É–≤—à–∏ –∫–Ω–æ–ø–∫—É <b>¬´–†–µ–¥–∞–≥—É–≤–∞—Ç–∏¬ª</b>, –º–æ–∂–Ω–∞ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∞–±–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –∑–∞–ø–∏—Å–∏.
        </p>
    </div>


    <div class="sp-wrapper">

        <!-- Left pane: tree -->
        <aside class="sp-left">
            <div class="sp-left-head">
                <div class="head-row">
                    <input type="search"
                           class="sp-search"
                           placeholder="–ü–æ—à—É–∫ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞‚Ä¶"
                           value={query}
                           oninput={handleSearch}>

                    <div class="sp-tools">
                        <!-- –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –≤—Å–µ -->
                        <button class="icon-btn"
                                title="–†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –≤—Å–µ"
                                aria-label="–†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –≤—Å–µ"
                                onclick={expandAll}
                                disabled={allOpened} >
                        <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"
                             fill="currentColor" aria-hidden="true" class="bi bi-arrows-expand">
                            <path fill-rule="evenodd"
                                  d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10z"/>
                        </svg>
                        </button>

                        <!-- –ó–≥–æ—Ä–Ω—É—Ç–∏ –≤—Å–µ -->
                        <button class="icon-btn"
                                title="–ó–≥–æ—Ä–Ω—É—Ç–∏ –≤—Å–µ"
                                aria-label="–ó–≥–æ—Ä–Ω—É—Ç–∏ –≤—Å–µ"
                                onclick={collapseAll}
                                disabled={allCollapsed}>
                        <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"
                             fill="currentColor" aria-hidden="true" class="bi bi-arrows-collapse">
                            <path fill-rule="evenodd"
                                  d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"/>
                        </svg>
                        </button>
                    </div>
                </div>
            </div>


            <!-- Group: –ö–æ–º–µ—Ä—Ü—ñ–π–Ω—ñ -->
            <section class="sp-group">
                <div class="sp-group-row" data-key="commercial" onclick={toggleGroup}>
                    <span class={commercialCaretClass}></span>
                    <h3 class="sp-group-title">–ö–æ–º–µ—Ä—Ü—ñ–π–Ω—ñ</h3>
                </div>
                <template if:true={commercialOpen}>
                    <ul class="sp-list">
                        <template for:each={filteredCommercialRendered} for:item="s">
                            <li key={s.id}>
                                <div class={s.className}
                                     data-id={s.id}
                                     onclick={selectSupplier}
                                     role="button"
                                     tabindex="0">
                                    {s.name}
                                </div>
                            </li>
                        </template>
                        <template if:true={showCommercialEmpty}>
                            <li class="sp-empty">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</li>
                        </template>
                    </ul>
                </template>
            </section>

            <!-- Group: –ù–µ–∫–æ–º–µ—Ä—Ü—ñ–π–Ω—ñ -->
            <section class="sp-group">
                <div class="sp-group-row" data-key="nonCommercial" onclick={toggleGroup}>
                    <span class={nonCommercialCaretClass}></span>
                    <h3 class="sp-group-title">–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∏–π</h3>
                </div>
                <template if:true={nonCommercialOpen}>
                    <ul class="sp-list">
                        <template for:each={filteredNonCommercialRendered} for:item="s">
                            <li key={s.id}>
                                <div class={s.className}
                                     data-id={s.id}
                                     onclick={selectSupplier}
                                     role="button"
                                     tabindex="0">
                                    {s.name}
                                </div>
                            </li>
                        </template>
                        <template if:true={showNonCommercialEmpty}>
                            <li class="sp-empty">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</li>
                        </template>
                    </ul>
                </template>
            </section>
        </aside>

        <!-- Right pane: details -->
        <main class="sp-right">
            <template if:true={selected}>
                <div class="card">
                    <div class="head">
                        <div class="title">
                            <h2>{selected.name}</h2>
                            <div class="meta">
                                <span class="pill">{selected.idErp}</span>
                                <span class="pill type">{selected.typeLabel}</span>

                                <!-- üîò –¢–æ–≥–ª –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ -->
                                <lightning-input
                                        type="toggle"
                                        class="active-toggle"
                                        message-toggle-active="–ê–∫—Ç–∏–≤–Ω–∏–π"
                                        message-toggle-inactive="–ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π"
                                        checked={uiActive}
                                        onchange={handleActiveToggleChange}>
                                </lightning-input>
                            </div>
                        </div>
                        <div class="actions">
                            <button class="main-button" onclick={openEditModal}>–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</button>
                        </div>
                    </div>


                    <div class="grid">
                        <div class="block">
                            <h3><strong> –ö–æ–Ω—Ç–∞–∫—Ç–∏ </strong></h3>
                            <p><b>–¢–µ–ª–µ—Ñ–æ–Ω: </b> <lightning-formatted-text value={selected.companyPhone}></lightning-formatted-text></p>
                            <p><b>Email: </b> <lightning-formatted-text value={selected.email}></lightning-formatted-text></p>
                            <p><b>–ê–¥—Ä–µ—Å–∞: </b> <lightning-formatted-text value={selected.address}></lightning-formatted-text></p>
                            <p><b>–ú–µ–Ω–µ–¥–∂–µ—Ä: </b> <lightning-formatted-text value={selected.manager}></lightning-formatted-text></p>
                        </div>

                        <div class="block">
                            <h3><strong>–ü—Ä–∏–º—ñ—Ç–∫–∏</strong></h3>
                            <p><lightning-formatted-text value={noteText}></lightning-formatted-text></p>

                        </div>
                    </div>
                </div>

                <!-- –õ—ñ–º—ñ—Ç–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –∑–∞ –º—ñ—Å—è—Ü—å -->
                <template if:true={limits}>
                    <div class="card table">
                        <div class="head">
                            <h3 class="tbl-title">
                                –õ—ñ–º—ñ—Ç–∏ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ <b>{selected.name}</b> ‚Äî {monthTitle}
                            </h3>
                        </div>

                        <div class="table-wrapper">
                            <table class="limits-matrix">
                                <thead>
                                <tr>
                                    <th class="left"></th>
                                    <th>1 –¥–µ–∫–∞–¥–∞</th>
                                    <th>2 –¥–µ–∫–∞–¥–∞</th>
                                    <th>3 –¥–µ–∫–∞–¥–∞</th>
                                    <th>–ú—ñ—Å—è—Ü—å</th>
                                </tr>
                                </thead>
                                <tbody>
                                <!-- –ó–∞—è–≤–ª–µ–Ω–∏–π -->
                                <tr class="row-proposed">
                                    <th class="left">–ó–∞—è–≤–ª–µ–Ω–∏–π –ø–ª–∞–Ω</th>
                                    <td>{limits.prop1} —Ç.</td>
                                    <td>{limits.prop2} —Ç.</td>
                                    <td>{limits.prop3} —Ç.</td>
                                    <td>{limits.propMonth} —Ç.</td>
                                </tr>

                                <!-- –£–∑–≥–æ–¥–∂–µ–Ω–∏–π -->
                                <tr class="row-approved">
                                    <th class="left">–£–∑–≥–æ–¥–∂–µ–Ω–∏–π –ø–ª–∞–Ω</th>
                                    <td>{limits.appr1} —Ç.</td>
                                    <td>{limits.appr2} —Ç.</td>
                                    <td>{limits.appr3} —Ç.</td>
                                    <td>{limits.apprMonth} —Ç.</td>
                                </tr>

                                <!-- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ -->
                                <tr class="row-used">
                                    <th class="left">–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ</th>
                                    <td>{limits.used1} —Ç.</td>
                                    <td>{limits.used2} —Ç.</td>
                                    <td>{limits.used3} —Ç.</td>
                                    <td>{limits.usedMonth} —Ç.</td>
                                </tr>

                                <!-- –ó–∞–ª–∏—à–æ–∫ -->
                                <tr class="row-remain">
                                    <th class="left">–ó–∞–ª–∏—à–æ–∫</th>
                                    <td class={rem1Class}>{limits.rem1} —Ç.</td>
                                    <td class={rem2Class}>{limits.rem2} —Ç.</td>
                                    <td class={rem3Class}>{limits.rem3} —Ç.</td>
                                    <td class={remMClass}>{limits.remMonth} —Ç.</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </template>


                <!-- –î–æ–≥–æ–≤–æ—Ä–∏ -->
                <div class="card table">
                    <div class="head">
                        <h3 class="tbl-title">–î–æ–≥–æ–≤–æ—Ä–∏</h3>
                    </div>

                    <div class="table-wrapper">
                        <table class="limits-table">
                            <thead>
                            <tr>
                                <th>–î–æ–≥–æ–≤—ñ—Ä</th>
                                <th>–ü–æ—á–∞—Ç–æ–∫</th>
                                <th>–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è</th>
                                <th>–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</th>
                                <th>–ë—É–¥–µ —á–∏–Ω–Ω–æ—é</th>
                            </tr>
                            </thead>
                            <tbody>
                            <template for:each={selected.contracts} for:item="c">
                                <tr key={c.id}>
                                    <td class="left">{c.dogN}</td>
                                    <td> {c.dateFrom} </td>
                                    <td> {c.dateTo} </td>
                                    <td><span class={c.activeClass}>{c.activeLabel}</span></td>
                                    <td>{c.willBeActive} –¥–Ω—ñ–≤</td>
                                </tr>
                            </template>

                            <template if:true={contractsEmpty}>
                                <tr><td colspan="5" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                            </template>
                            </tbody>

                        </table>
                    </div>
                </div>


                <!-- –ó–æ–Ω–∏ -->
                <div class="card table">
                    <div class="head">
                        <h3 class="tbl-title">–ú—ñ—Å—Ü–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</h3>
<!--                        <div class="action-row">-->
<!--                            <button class="secondary-button" onclick={toggleAddZone}>+ –î–æ–¥–∞—Ç–∏ –∞–¥—Ä–µ—Å—É</button>-->
<!--                        </div>-->
                    </div>

                    <template if:true={showAddZoneForm}>
                        <div class="manual-grid">
                            <lightning-input label="–ù–∞–∑–≤–∞" data-name="zoneName" required onchange={handleZoneDraft}></lightning-input>
                            <lightning-input label="–ú—ñ—Å—Ç–æ" data-name="zoneCity" required onchange={handleZoneDraft}></lightning-input>
                            <lightning-input label="–ê–¥—Ä–µ—Å–∞" data-name="zoneAddress" required onchange={handleZoneDraft}></lightning-input>
                        </div>
                        <div class="sub-actions">
                            <button class="secondary-button" onclick={toggleAddZone}>–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                            <button class="main-button" onclick={saveZone}>–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                        </div>
                    </template>

                    <div class="table-wrapper">
                        <table class="limits-table">
                            <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞</th>
                                <th>–ö—Ä–∞—ó–Ω–∞</th>
                                <th>–ú—ñ—Å—Ç–æ</th>
                                <th>–ê–¥—Ä–µ—Å–∞</th>
                            </tr>
                            </thead>
                            <tbody>
                            <template for:each={selected.shippingPoints} for:item="z">
                                <tr key={z.id}>
                                    <td class="left">{z.name}</td>
                                    <td>{z.countryName}</td>
                                    <td>{z.city}</td>
                                    <td>{z.address}</td>
                                </tr>
                            </template>

                            <template if:true={zonesEmpty}>
                                <tr><td colspan="4" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                            </template>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- –í–æ–¥—ñ—ó -->
                <div class="card table">
                    <div class="head">
                        <h3 class="tbl-title">–í–æ–¥—ñ—ó</h3>
                        <template if:false={showAddDriverForm}>
<!--                            <div class="action-row">-->
<!--                                <button class="secondary-button" onclick={toggleAddDriver}>+ –î–æ–¥–∞—Ç–∏ –≤–æ–¥—ñ—è</button>-->
<!--                            </div>-->
                        </template>
                    </div>


                    <template if:true={showAddDriverForm}>
                        <div class="manual-grid">
                            <lightning-input label="–ü—Ä—ñ–∑–≤–∏—â–µ" data-name="driverLastName" required onchange={handleDriverDraft}></lightning-input>
                            <lightning-input label="–Ü–º‚Äô—è" data-name="driverFirstName" required onchange={handleDriverDraft}></lightning-input>
                            <lightning-input label="–ü–æ –±–∞—Ç—å–∫–æ–≤—ñ" data-name="driverMiddleName" onchange={handleDriverDraft}></lightning-input>

                            <lightning-input type="tel" label="–¢–µ–ª–µ—Ñ–æ–Ω" data-name="driverPhone" required onchange={handleDriverDraft}></lightning-input>
                            <lightning-input type="email" label="Email" data-name="driverEmail" onchange={handleDriverDraft}></lightning-input>

                            <lightning-input label="–í—ñ–¥–¥—ñ–ª" value="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∏–π –≤—ñ–¥–¥—ñ–ª" disabled></lightning-input>
                            <lightning-input label="–ü–æ—Å–∞–¥–∞" value="–í–æ–¥—ñ–π" disabled></lightning-input>
                        </div>
                        <div class="sub-actions">
                            <button class="secondary-button" onclick={toggleAddDriver}>–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                            <button class="main-button" onclick={saveDriver}>–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                        </div>
                    </template>


                    <div class="table-wrapper">
                        <table class="limits-table">
                            <thead>
                            <tr>
                                <th>–ü–Ü–ë</th>
                                <th>–ü–æ—Å–∞–¥–∞</th>
                                <th>–í—ñ–¥–¥—ñ–ª</th>
                                <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                <th>Email</th>
                            </tr>
                            </thead>
                            <tbody>
                            <template for:each={selected.drivers} for:item="d">
                                <tr key={d.id}>
                                    <td class="left">{d.name}</td>
                                    <td>{d.title}</td>
                                    <td>{d.dept}</td>
                                    <td>{d.phone}</td>
                                    <td>{d.email}</td>
                                </tr>
                            </template>
                            <template if:true={driversEmpty}>
                                <tr><td colspan="6" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                            </template>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- –ú–µ–Ω–µ–¥–∂–µ—Ä–∏ -->
                <div class="card table">
                    <div class="head">
                        <h3 class="tbl-title">–ú–µ–Ω–µ–¥–∂–µ—Ä–∏</h3>
                        <template if:false={showAddManagerForm}>
<!--                            <div class="action-row">-->
<!--                                <button class="secondary-button" onclick={toggleAddManager}>+ –î–æ–¥–∞—Ç–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</button>-->
<!--                            </div>-->
                        </template>
                    </div>


                    <template if:true={showAddManagerForm}>
                        <div class="manual-grid">
                            <lightning-input label="–ü—Ä—ñ–∑–≤–∏—â–µ" data-name="lastName" required onchange={handleManagerDraft}></lightning-input>
                            <lightning-input label="–Ü–º‚Äô—è" data-name="firstName" required onchange={handleManagerDraft}></lightning-input>
                            <lightning-input label="–ü–æ –±–∞—Ç—å–∫–æ–≤—ñ" data-name="middleName" onchange={handleManagerDraft}></lightning-input>
                            <lightning-input type="tel" label="–¢–µ–ª–µ—Ñ–æ–Ω" data-name="phone" onchange={handleManagerDraft}></lightning-input>
                            <lightning-input type="email" label="Email" data-name="email" onchange={handleManagerDraft}></lightning-input>
                            <lightning-input label="–ü–æ—Å–∞–¥–∞" value="–î–∏—Ä–µ–∫—Ç–æ—Ä" disabled></lightning-input>
                            <lightning-input label="–í—ñ–¥–¥—ñ–ª" value="–î–∏—Ä–µ–∫—Ü—ñ—è" disabled></lightning-input>
                        </div>
                        <div class="sub-actions">
                            <button class="secondary-button" onclick={toggleAddManager}>–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                            <button class="main-button" onclick={saveManager}>–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                        </div>
                    </template>


                    <div class="table-wrapper">
                        <table class="limits-table">
                            <thead>
                            <tr>
                                <th>–ü–Ü–ë</th>
                                <th>–ü–æ—Å–∞–¥–∞</th>
                                <th>–í—ñ–¥–¥—ñ–ª</th>
                                <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                <th>Email</th>
                            </tr>
                            </thead>
                            <tbody>
                            <template for:each={selected.managers} for:item="m">
                                <tr key={m.id}>
                                    <td class="left">{m.name}</td>
                                    <td>{m.title}</td>
                                    <td>{m.dept}</td>
                                    <td>{m.phone}</td>
                                    <td>{m.email}</td>
                                </tr>
                            </template>
                            <template if:true={managersEmpty}>
                                <tr><td colspan="6" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                            </template>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- –ú–∞—à–∏–Ω–∏ -->
                <div class="card table">
                    <div class="head">
                        <h3 class="tbl-title">–ú–∞—à–∏–Ω–∏</h3>
<!--                        <template if:false={showAddVehicleForm}>-->
<!--                            <div class="action-row">-->
<!--                                <button class="secondary-button" onclick={toggleAddVehicle}>+ –î–æ–¥–∞—Ç–∏ –º–∞—à–∏–Ω—É</button>-->
<!--                            </div>-->
<!--                        </template>-->
                    </div>


<!--                    <template if:true={showAddVehicleForm}>-->
<!--                        <div class="manual-grid">-->
<!--                            <lightning-input-->
<!--                                    type="search"-->
<!--                                    label="–ü–æ—à—É–∫ —ñ—Å–Ω—É—é—á–æ—ó –º–∞—à–∏–Ω–∏ (–Ω–æ–º–µ—Ä / –º–æ–¥–µ–ª—å / –≤–ª–∞—Å–Ω–∏–∫)"-->
<!--                                    value={lookupSearchText}-->
<!--                                    onchange={handleLookupInput}-->
<!--                                    oninput={handleLookupInput}>-->
<!--                            </lightning-input>-->

<!--                            <template if:true={hasLookupResults}>-->
<!--                                <ul class="sp-lookup-list">-->
<!--                                    <template for:each={lookupResults} for:item="row">-->
<!--                                        <li key={row.id}>-->
<!--                                            <button type="button"-->
<!--                                                    class="sp-lookup-item"-->
<!--                                                    data-id={row.id}-->
<!--                                                    onclick={handleLookupPick}>-->
<!--                                                <span class="left">{row.plateNumber}</span>-->
<!--                                                <span class="mid">{row.model}</span>-->
<!--                                                <span class="right">{row.ownerName}</span>-->
<!--                                            </button>-->
<!--                                        </li>-->
<!--                                    </template>-->
<!--                                </ul>-->
<!--                            </template>-->
<!--                        </div>-->

<!--                        <div class="sub-actions">-->
<!--                            <button class="secondary-button" onclick={toggleAddVehicle}>–°–∫–∞—Å—É–≤–∞—Ç–∏</button>-->
<!--                            <button class="main-button" onclick={saveVehicle} disabled={isSaveVehicleDisabled}>–ó–±–µ—Ä–µ–≥—Ç–∏</button>-->
<!--                        </div>-->
<!--                    </template>-->


                    <div class="table-wrapper">
                        <table class="limits-table">
                            <thead>
                            <tr>
                                <th>–î–µ—Ä–∂. –Ω–æ–º–µ—Ä</th>
                                <th>–ú–∞—Ä–∫–∞ / –ú–æ–¥–µ–ª—å</th>
                                <th>–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É</th>
                                <th>–¢–æ–Ω–Ω–∞–∂, —Ç</th>
                            </tr>
                            </thead>
                            <tbody>
                            <template for:each={selected.vehicles} for:item="v">
                                <tr key={v.id}>
                                    <td class="left">{v.plateNumber}</td>
                                    <td>{v.model}</td>
                                    <td>{v.typeLabel}</td>
                                    <td>{v.tonnage}</td>
                                </tr>
                            </template>
                            <template if:true={vehiclesEmpty}>
                                <tr><td colspan="5" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                            </template>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- –î–æ—Å—Ç—É–ø–∏ –¥–æ —Ç–∏–ø—ñ–≤ –±—Ä—É—Ö—Ç—É (–¥–ª—è –≤–∏–±—Ä–∞–Ω–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞) -->
                <div class="card table">
                    <div class="head">
                        <h3 class="tbl-title">–î–æ—Å—Ç—É–ø–∏ –¥–æ —Ç–∏–ø—ñ–≤ –±—Ä—É—Ö—Ç—É</h3>
                        <div class="action-row">
                            <input type="search"
                                   class="sp-search"
                                   placeholder="–ü–æ—à—É–∫ —Ç–∏–ø—É –±—Ä—É—Ö—Ç—É‚Ä¶"
                                   value={scrapSearch}
                                   oninput={handleScrapSearch}>
                        </div>
                    </div>

                    <div class="table-wrapper">
                        <template if:true={typesLoading}>
                            <div class="sp-empty-row">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è‚Ä¶</div>
                        </template>

                        <template if:true={typesError}>
                            <div class="sp-empty-row">–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö.</div>
                        </template>

                        <table class="limits-table">
                            <thead>
                            <tr>
                                <th class="left">–¢–∏–ø –±—Ä—É—Ö—Ç—É</th>
                                <th>–ö–æ–¥ (Kmat)</th>
                                <th>–ì—Ä—É–ø–∞</th>
                                <th>–î–æ—Å—Ç—É–ø</th>
                            </tr>
                            </thead>
                            <tbody>
                            <template if:true={hasFilteredTypes}>
                                <template for:each={filteredAvailableTypes} for:item="t">
                                    <tr key={t.id}>
                                        <td class="left">{t.name}</td>
                                        <td><span class="mono">{t.code}</span></td>
                                        <td>{t.groupName}</td>
                                        <td><span class={t.permittedClass}>{t.permittedLabel}</span></td>
                                    </tr>
                                </template>
                            </template>

                            <template if:false={hasFilteredTypes}>
                                <tr><td colspan="5" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                            </template>
                            </tbody>
                        </table>
                    </div>
                </div>



            </template>

            <template if:false={selected}>
                <div class="placeholder">–û–±–µ—Ä—ñ—Ç—å –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ –ª—ñ–≤–æ—Ä—É—á, —â–æ–± –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –¥–µ—Ç–∞–ª—ñ.</div>
            </template>

            <template if:true={showEditModal}>
                <div class="modal-backdrop">
                    <div class={modalContentClass} aria-busy={saving}>
                        <div class="modal-header">
                            <h2>–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞</h2>
                        </div>

                        <div class="modal-body">
                            <!-- –Ü–Ω—Ñ–æ–±–ª–æ–∫ (—Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥ –±–∞–∑–æ–≤–∏—Ö, –±–µ–∑ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –Ω–∞ —Ü—å–æ–º—É –∫—Ä–æ—Ü—ñ) -->
                            <div class="info-grid">
                                <div class="info-field">
                                    <label>–ù–∞–∑–≤–∞ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞</label>
                                    <lightning-formatted-text value={selected.name}></lightning-formatted-text>
                                </div>
                                <div class="info-field">
                                    <label>–Ñ–î–†–ü–û–£</label>
                                    <lightning-formatted-text value={selected.zkpo}></lightning-formatted-text>
                                </div>
                                <div class="info-field">
                                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                                    <lightning-formatted-text value={selected.phone}></lightning-formatted-text>
                                </div>
                                <div class="info-field">
                                    <label>Email</label>
                                    <lightning-formatted-text value={selected.email}></lightning-formatted-text>
                                </div>
                            </div>

                            <!-- –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ -->
                            <div class="main-edit-grid">
                                <lightning-input
                                        label="–ù–∞–∑–≤–∞ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞"
                                        data-name="name"
                                        value={editedMain.name}
                                        onchange={handleMainInputChange}>
                                </lightning-input>

                                <lightning-input
                                        label="–¢–µ–ª–µ—Ñ–æ–Ω"
                                        data-name="phone"
                                        value={editedMain.phone}
                                        onchange={handleMainInputChange}>
                                </lightning-input>

                                <lightning-input
                                        type="email"
                                        label="Email"
                                        data-name="email"
                                        value={editedMain.email}
                                        onchange={handleMainInputChange}>
                                </lightning-input>

                                <lightning-textarea
                                        class="span-2"
                                        label="–ü—Ä–∏–º—ñ—Ç–∫–∏"
                                        data-name="description"
                                        value={editedMain.description}
                                        onchange={handleMainInputChange}>
                                </lightning-textarea>

                                <!-- –ê–¥—Ä–µ—Å–∞ (Billing) -->
                                <lightning-textarea
                                        class="span-2"
                                        label="–í—É–ª–∏—Ü—è (BillingStreet)"
                                        data-name="billingStreet"
                                        value={editedMain.billingStreet}
                                        onchange={handleMainInputChange}>
                                </lightning-textarea>

                                <lightning-input
                                        label="–ú—ñ—Å—Ç–æ (BillingCity)"
                                        data-name="billingCity"
                                        value={editedMain.billingCity}
                                        onchange={handleMainInputChange}>
                                </lightning-input>

                                <lightning-input
                                        label="–û–±–ª–∞—Å—Ç—å/–®—Ç–∞—Ç (BillingState)"
                                        data-name="billingState"
                                        value={editedMain.billingState}
                                        onchange={handleMainInputChange}>
                                </lightning-input>

                                <lightning-input
                                        label="–ü–æ—à—Ç–æ–≤–∏–π —ñ–Ω–¥–µ–∫—Å (BillingPostalCode)"
                                        data-name="billingPostalCode"
                                        value={editedMain.billingPostalCode}
                                        onchange={handleMainInputChange}>
                                </lightning-input>
                            </div>

                            <div class="section-list">
                                <h3>–î–æ–≥–æ–≤–æ—Ä–∏</h3>
                                <div class="table-wrapper">
                                    <table class="drivers-table">
                                        <thead>
                                        <tr>
                                            <th>–î–æ–≥–æ–≤—ñ—Ä</th>
                                            <th>–ü–æ—á–∞—Ç–æ–∫</th>
                                            <th>–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è</th>
                                            <th>–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</th>
                                            <th>–ë—É–¥–µ —á–∏–Ω–Ω–æ—é</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <template for:each={selected.contracts} for:item="c">
                                            <tr key={c.id}>
                                                <td class="left">{c.dogN}</td>
                                                <td>{c.dateFrom}</td>
                                                <td>{c.dateTo}</td>
                                                <td><span class={c.activeClass}>{c.activeLabel}</span></td>
                                                <td>{c.willBeActive}</td>
                                            </tr>
                                        </template>
                                        <template if:true={contractsEmpty}>
                                            <tr><td colspan="5" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                                        </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- –ú—ñ—Å—Ü—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è -->
                            <div class="section-list">
                                <div class="head">
                                    <h3>–ú—ñ—Å—Ü–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</h3>
                                    <!-- NEW: action-row —É –º–æ–¥–∞–ª—Ü—ñ -->
                                    <div class="action-row">
                                        <button class="secondary-button" onclick={addZoneInModal}>+ –î–æ–¥–∞—Ç–∏ –∞–¥—Ä–µ—Å—É</button>
                                    </div>
                                </div>


                                <div class="table-wrapper">
                                    <table class="drivers-table">
                                        <thead>
                                        <tr>
                                            <th>–ù–∞–∑–≤–∞</th>
                                            <th>–ö—Ä–∞—ó–Ω–∞</th>
                                            <th>–ú—ñ—Å—Ç–æ</th>
                                            <th>–ê–¥—Ä–µ—Å–∞</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <template for:each={editZones} for:item="z">
                                            <tr key={z.id} class={z.rowClass}>
                                                <!-- –ù–∞–∑–≤–∞ -->
                                                <td class="left">
                                                    <template if:true={z._isEditing}>
                                                        <lightning-input data-type="zone" data-id={z.id} data-name="name"
                                                                         value={z._draft.name} label="–ù–∞–∑–≤–∞"
                                                                         onchange={handleRowDraftInput}></lightning-input>
                                                    </template>
                                                    <template if:false={z._isEditing}>
                                                        {z.name}
                                                    </template>
                                                </td>

                                                <!-- –ö—Ä–∞—ó–Ω–∞ (—Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥) -->
                                                <td>{z.countryName}</td>

                                                <!-- –ú—ñ—Å—Ç–æ -->
                                                <td>
                                                    <template if:true={z._isEditing}>
                                                        <lightning-input data-type="zone" data-id={z.id} data-name="city"
                                                                         value={z._draft.city} label="–ú—ñ—Å—Ç–æ"
                                                                         onchange={handleRowDraftInput}></lightning-input>
                                                    </template>
                                                    <template if:false={z._isEditing}>
                                                        {z.city}
                                                    </template>
                                                </td>

                                                <!-- –ê–¥—Ä–µ—Å–∞ -->
                                                <td>
                                                    <template if:true={z._isEditing}>
                                                        <lightning-input data-type="zone" data-id={z.id} data-name="address"
                                                                         value={z._draft.address} label="–ê–¥—Ä–µ—Å–∞"
                                                                         onchange={handleRowDraftInput}></lightning-input>
                                                    </template>
                                                    <template if:false={z._isEditing}>
                                                        {z.address}
                                                    </template>
                                                </td>

                                                <!-- –î—ñ—ó -->
                                                <td class="actions-cell">
                                                    <template if:true={z._isEditing}>
                                                        <button class="chip-save" data-type="zone" data-id={z.id} onclick={handleRowSave}>–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                                                        <button class="icon-button cancel" data-type="zone" data-id={z.id} onclick={cancelRowEdit}
                                                                title="–°–∫–∞—Å—É–≤–∞—Ç–∏" aria-label="–°–∫–∞—Å—É–≤–∞—Ç–∏">
                                                            <!-- —Ö—Ä–µ—Å—Ç–∏–∫ -->
                                                            <svg viewBox="0 0 32 32" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM16 6c-5.522 0-10 4.478-10 10s4.478 10 10 10c5.523 0 10-4.478 10-10s-4.477-10-10-10zM20.537 19.535l-1.014 1.014c-.186.186-.488.186-.675 0l-2.87-2.87-2.87 2.87c-.187.186-.488.186-.675 0l-1.014-1.014c-.186-.186-.186-.488 0-.675l2.871-2.869-2.871-2.87c-.186-.187-.186-.489 0-.676l1.014-1.013c.187-.187.488-.187.675 0l2.87 2.87 2.87-2.87c.187-.187.489-.187.675 0l1.014 1.013c.186.187.186.489 0 .676l-2.871 2.87 2.871 2.869c.186.187.186.49 0 .675z"></path>
                                                            </svg>
                                                        </button>
                                                    </template>

                                                    <template if:false={z._isEditing}>
                                                        <button class="icon-button edit" data-type="zone" data-id={z.id} onclick={startRowEdit}
                                                                title="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏" aria-label="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏">
                                                            <svg viewBox="0 0 24 24" class="icon-24" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M21.28 6.4L11.74 15.94c-.95.95-3.77 1.39-4.4.76-.63-.63-.2-3.45.75-4.4L17.64 2.75a3.2 3.2 0 014.57 4.57z" fill="none" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                                                <path d="M11 4H6a4 4 0 00-4 4v10a4 4 0 004 4h11c2.21 0 3-1.8 3-4v-5" fill="none" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                                            </svg>
                                                        </button>

                                                        <template if:true={z.showDeleteIcon}>
                                                            <button class="icon-button" data-type="zone" data-id={z.id} onclick={toggleMarkRemove}
                                                                    title="–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è" aria-label="–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è">
                                                                <svg viewBox="0 0 24 24" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M10 12V17M14 12V17M4 7H20M6 10V18c0 1.66 1.34 3 3 3h6c1.66 0 3-1.34 3-3V10M9 5c0-1.1.9-2 2-2h2a2 2 0 012 2v2H9V5z"
                                                                          fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                                </svg>
                                                            </button>
                                                        </template>

                                                        <template if:true={z.showReturnIcon}>
                                                            <button class="icon-button" data-type="zone" data-id={z.id} onclick={toggleMarkRemove}
                                                                    title="–ü–æ–≤–µ—Ä–Ω—É—Ç–∏" aria-label="–ü–æ–≤–µ—Ä–Ω—É—Ç–∏">
                                                                <svg viewBox="0 0 32 32" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M0 21.984q.032-.8.608-1.376l4-4a2 2 0 012.496-.448c.64.32.896.8.896 1.376v1.984h18.016a2 2 0 002-1.984v-8a2 2 0 00-2-2.016h-16a2 2 0 01-1.888-2.56A2 2 0 018.128 4h16a6 6 0 016 6v8a6 6 0 01-6 6H8.112v2.016a2 2 0 01-3.392 1.408l-4-4A2 2 0 010 21.984z" fill="#000"></path>
                                                                </svg>
                                                            </button>
                                                        </template>
                                                    </template>
                                                </td>
                                            </tr>

                                        </template>

                                        <template if:true={editZonesEmpty}>
                                            <tr><td colspan="5" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                                        </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="section-list">
                                <div class="head">
                                    <h3>–í–æ–¥—ñ—ó</h3>
                                    <div class="action-row">
                                        <button class="secondary-button" onclick={addDriverInModal}>+ –î–æ–¥–∞—Ç–∏ –≤–æ–¥—ñ—è</button>
                                    </div>
                                </div>

                                <div class="table-wrapper">
                                    <table class="drivers-table">
                                        <thead>
                                        <tr>
                                            <th>–ü–Ü–ë</th>
                                            <th>–ü–æ—Å–∞–¥–∞</th>
                                            <th>–í—ñ–¥–¥—ñ–ª</th>
                                            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                            <th>Email</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <template for:each={editDrivers}  for:item="d">
                                            <tr key={d.id} class={d.rowClass}>
                                                <!-- –ü–Ü–ë (—Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥) -->
                                                <td class="left">
                                                    <template if:true={d._isNew}>
                                                        <template if:true={d._isEditing}>
                                                            <div class="name-grid">
                                                                <lightning-input label="–ü—Ä—ñ–∑–≤–∏—â–µ" required  data-type="driver"  data-id={d.id} data-name="lastName" value={d._person.lastName}  onchange={handlePersonNameDraft}></lightning-input>
                                                                <lightning-input label="–Ü–º‚Äô—è"  required    data-type="driver"  data-id={d.id} data-name="firstName" value={d._person.firstName} onchange={handlePersonNameDraft}></lightning-input>
                                                                <lightning-input label="–ü–æ –±–∞—Ç—å–∫–æ–≤—ñ" data-type="driver" data-id={d.id} data-name="middleName" value={d._person.middleName} onchange={handlePersonNameDraft}></lightning-input>
                                                            </div>
                                                        </template>
                                                        <template if:false={d._isEditing}>
                                                            {d.name}
                                                        </template>
                                                    </template>
                                                    <!-- –£ –∫–æ–ª–æ–Ω—Ü—ñ –ü–Ü–ë –¥–ª—è driver –ó–ê–ú–Ü–ù–ò–¢–ò –±–ª–æ–∫ –¥–ª—è !d._isNew -->
                                                    <template if:false={d._isNew}>
                                                        <template if:true={d._isEditing}>
                                                            <div class="name-grid">
                                                                <lightning-input label="–ü—Ä—ñ–∑–≤–∏—â–µ" required data-type="driver" data-id={d.id}
                                                                                 data-name="lastName" value={d._draft.lastName}
                                                                                 onchange={handleRowDraftInput}></lightning-input>
                                                                <lightning-input label="–Ü–º‚Äô—è" required data-type="driver" data-id={d.id}
                                                                                 data-name="firstName" value={d._draft.firstName}
                                                                                 onchange={handleRowDraftInput}></lightning-input>
                                                                <lightning-input label="–ü–æ –±–∞—Ç—å–∫–æ–≤—ñ" data-type="driver" data-id={d.id}
                                                                                 data-name="middleName" value={d._draft.middleName}
                                                                                 onchange={handleRowDraftInput}></lightning-input>
                                                            </div>
                                                        </template>
                                                        <template if:false={d._isEditing}>
                                                            {d.name}
                                                        </template>
                                                    </template>

                                                </td>


                                                <!-- –ü–æ—Å–∞–¥–∞ -->
                                                <td>
                                                    <template if:false={d._isEditing}>
                                                        {d.title}
                                                    </template>
                                                    <template if:true={d._isEditing}>
                                                        <lightning-input
                                                                data-type="driver"
                                                                data-id={d.id}
                                                                label="–ü–æ—Å–∞–¥–∞"
                                                                data-name="title"
                                                                value={d._draft.title}
                                                                disabled
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                </td>

                                                <!-- –í—ñ–¥–¥—ñ–ª -->
                                                <td>
                                                    <template if:false={d._isEditing}>
                                                        {d.dept}
                                                    </template>
                                                    <template if:true={d._isEditing}>
                                                        <lightning-input
                                                                data-type="driver"
                                                                data-id={d.id}
                                                                data-name="dept"
                                                                label="–í—ñ–¥–¥—ñ–ª"
                                                                value={d._draft.dept}
                                                                disabled
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                </td>

                                                <!-- –¢–µ–ª–µ—Ñ–æ–Ω -->
                                                <td>
                                                    <template if:false={d._isEditing}>
                                                        {d.phone}
                                                    </template>
                                                    <template if:true={d._isEditing}>
                                                        <lightning-input
                                                                data-type="driver"
                                                                data-id={d.id}
                                                                required
                                                                label="–¢–µ–ª–µ—Ñ–æ–Ω"
                                                                data-name="phone"
                                                                value={d._draft.phone}
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                </td>

                                                <!-- Email -->
                                                <td>
                                                    <template if:false={d._isEditing}>
                                                        {d.email}
                                                    </template>
                                                    <template if:true={d._isEditing}>
                                                        <lightning-input
                                                                type="email"
                                                                data-type="driver"
                                                                label="Email"
                                                                data-id={d.id}
                                                                data-name="email"
                                                                value={d._draft.email}
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                </td>

                                                <!-- –î—ñ—ó -->
                                                <td class="actions-cell">
                                                    <!-- –†–µ–∂–∏–º –†–ï–î–ê–ì–£–í–ê–ù–ù–Ø: –ø–æ–∫–∞–∑—É—î–º–æ –ó–±–µ—Ä–µ–≥—Ç–∏ + –•—Ä–µ—Å—Ç–∏–∫ -->
                                                    <template if:true={d._isEditing}>
                                                        <button class="chip-save"
                                                                data-type="driver"
                                                                data-id={d.id}
                                                                onclick={handleRowSave}>
                                                            –ó–±–µ—Ä–µ–≥—Ç–∏
                                                        </button>

                                                        <button class="icon-button cancel"
                                                                data-type="driver"
                                                                data-id={d.id}
                                                                onclick={cancelRowEdit}
                                                                title="–°–∫–∞—Å—É–≤–∞—Ç–∏"
                                                                aria-label="–°–∫–∞—Å—É–≤–∞—Ç–∏">
                                                            <!-- —Ö—Ä–µ—Å—Ç–∏–∫-—ñ–∫–æ–Ω–∫–∞ -->
                                                            <svg viewBox="0 0 32 32" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM16 6c-5.522 0-10 4.478-10 10s4.478 10 10 10c5.523 0 10-4.478 10-10s-4.477-10-10-10zM20.537 19.535l-1.014 1.014c-.186.186-.488.186-.675 0l-2.87-2.87-2.87 2.87c-.187.186-.488.186-.675 0l-1.014-1.014c-.186-.186-.186-.488 0-.675l2.871-2.869-2.871-2.87c-.186-.187-.186-.489 0-.676l1.014-1.013c.187-.187.488-.187.675 0l2.87 2.87 2.87-2.87c.187-.187.489-.187.675 0l1.014 1.013c.186.187.186.489 0 .676l-2.871 2.87 2.871 2.869c.186.187.186.49 0 .675z"></path>
                                                            </svg>
                                                        </button>
                                                    </template>

                                                    <!-- –ó–í–ò–ß–ê–ô–ù–ò–ô —Ä–µ–∂–∏–º: ‚úèÔ∏è —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ + –º—É—Å–æ—Ä–∫–∞/–ø–æ–≤–µ—Ä–Ω—É—Ç–∏ -->
                                                    <template if:false={d._isEditing}>
                                                        <button class="icon-button edit"
                                                                data-type="driver"
                                                                data-id={d.id}
                                                                onclick={startRowEdit}
                                                                title="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏"
                                                                aria-label="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏">
                                                            <!-- –≤–∞—à pencil SVG -->
                                                            <svg viewBox="0 0 24 24" class="icon-24" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M21.28 6.4L11.74 15.94c-.95.95-3.77 1.39-4.4.76-.63-.63-.2-3.45.75-4.4L17.64 2.75a3.2 3.2 0 014.57 4.57z" fill="none" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                                <path d="M11 4H6a4 4 0 00-4 4v10a4 4 0 004 4h11c2.21 0 3-1.8 3-4v-5" fill="none" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                            </svg>
                                                        </button>

                                                        <template if:true={d.showDeleteIcon}>
                                                            <button class="icon-button"
                                                                    data-type="driver"
                                                                    data-id={d.id}
                                                                    onclick={toggleMarkRemove}
                                                                    title="–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è"
                                                                    aria-label="–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è">
                                                                <!-- –º—É—Å–æ—Ä–∫–∞ -->
                                                                <svg viewBox="0 0 24 24" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M10 12V17M14 12V17M4 7H20M6 10V18c0 1.66 1.34 3 3 3h6c1.66 0 3-1.34 3-3V10M9 5c0-1.1.9-2 2-2h2a2 2 0 012 2v2H9V5z"
                                                                          fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                                </svg>
                                                            </button>
                                                        </template>

                                                        <template if:true={d.showReturnIcon}>
                                                            <button class="icon-button"
                                                                    data-type="driver"
                                                                    data-id={d.id}
                                                                    onclick={toggleMarkRemove}
                                                                    title="–ü–æ–≤–µ—Ä–Ω—É—Ç–∏"
                                                                    aria-label="–ü–æ–≤–µ—Ä–Ω—É—Ç–∏">
                                                                <!-- –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ -->
                                                                <svg viewBox="0 0 32 32" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M0 21.984q.032-.8.608-1.376l4-4a2 2 0 012.496-.448c.64.32.896.8.896 1.376v1.984h18.016a2 2 0 002-1.984v-8a2 2 0 00-2-2.016h-16a2 2 0 01-1.888-2.56A2 2 0 018.128 4h16a6 6 0 016 6v8a6 6 0 01-6 6H8.112v2.016a2 2 0 01-3.392 1.408l-4-4A2 2 0 010 21.984z" fill="#000"/>
                                                                </svg>
                                                            </button>
                                                        </template>
                                                    </template>
                                                </td>


                                            </tr>
                                        </template>

                                        <template if:true={editDriversEmpty}>
                                            <tr><td colspan="6" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                                        </template>

                                        </tbody>

                                    </table>
                                </div>
<!--                                <div class="hint">–ü–æ–∑–Ω–∞—á–µ–Ω—ñ —á–µ—Ä —Ä—è–¥–∫–∏ –±—É–¥—É—Ç—å –≤–∏–¥–∞–ª–µ–Ω—ñ –ø—ñ—Å–ª—è –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è ¬´–ó–±–µ—Ä–µ–≥—Ç–∏¬ª.</div>-->
                            </div>

                            <!-- –ú–µ–Ω–µ–¥–∂–µ—Ä–∏ -->
                            <div class="section-list">
                                <div class="head">
                                    <h3>–ú–µ–Ω–µ–¥–∂–µ—Ä–∏</h3>
                                    <div class="action-row">
                                        <button class="secondary-button" onclick={addManagerInModal}>+ –î–æ–¥–∞—Ç–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</button>
                                    </div>
                                </div>

                                <div class="table-wrapper">
                                    <table class="drivers-table">
                                        <thead>
                                        <tr>
                                            <th>–ü–Ü–ë</th>
                                            <th>–ü–æ—Å–∞–¥–∞</th>
                                            <th>–í—ñ–¥–¥—ñ–ª</th>
                                            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                            <th>Email</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <template for:each={editManagers} for:item="m">
                                            <tr key={m.id} class={m.rowClass}>
                                                <!-- –ü–Ü–ë (—Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥) -->

                                                <td class="left">
                                                    <template if:true={m._isNew}>
                                                        <template if:true={m._isEditing}>
                                                            <div class="name-grid">
                                                                <lightning-input label="–ü—Ä—ñ–∑–≤–∏—â–µ" required data-type="manager" data-id={m.id} data-name="lastName" value={m._person.lastName}  onchange={handlePersonNameDraft}></lightning-input>
                                                                <lightning-input label="–Ü–º‚Äô—è"  required data-type="manager" data-id={m.id} data-name="firstName" value={m._person.firstName} onchange={handlePersonNameDraft}></lightning-input>
                                                                <lightning-input label="–ü–æ –±–∞—Ç—å–∫–æ–≤—ñ" data-type="manager" data-id={m.id} data-name="middleName" value={m._person.middleName} onchange={handlePersonNameDraft}></lightning-input>
                                                            </div>
                                                        </template>
                                                        <template if:false={m._isEditing}>
                                                            {m.name}
                                                        </template>
                                                    </template>
                                                    <!-- –£ –∫–æ–ª–æ–Ω—Ü—ñ –ü–Ü–ë –¥–ª—è manager –ó–ê–ú–Ü–ù–ò–¢–ò –±–ª–æ–∫ –¥–ª—è !m._isNew -->
                                                    <template if:false={m._isNew}>
                                                        <template if:true={m._isEditing}>
                                                            <div class="name-grid">
                                                                <lightning-input label="–ü—Ä—ñ–∑–≤–∏—â–µ" required data-type="manager" data-id={m.id}
                                                                                 data-name="lastName" value={m._draft.lastName}
                                                                                 onchange={handleRowDraftInput}></lightning-input>
                                                                <lightning-input label="–Ü–º‚Äô—è" required data-type="manager" data-id={m.id}
                                                                                 data-name="firstName" value={m._draft.firstName}
                                                                                 onchange={handleRowDraftInput}></lightning-input>
                                                                <lightning-input label="–ü–æ –±–∞—Ç—å–∫–æ–≤—ñ" data-type="manager" data-id={m.id}
                                                                                 data-name="middleName" value={m._draft.middleName}
                                                                                 onchange={handleRowDraftInput}></lightning-input>
                                                            </div>
                                                        </template>
                                                        <template if:false={m._isEditing}>
                                                            {m.name}
                                                        </template>
                                                    </template>

                                                </td>


                                                <!-- –ü–æ—Å–∞–¥–∞ -->
                                                <td>
                                                    <template if:false={m._isEditing}>
                                                        {m.title}
                                                    </template>
                                                    <template if:true={m._isEditing}>
                                                        <lightning-input
                                                                data-type="manager"
                                                                label="–ü–æ—Å–∞–¥–∞"
                                                                data-id={m.id}
                                                                data-name="title"
                                                                disabled
                                                                value={m._draft.title}
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                </td>

                                                <!-- –í—ñ–¥–¥—ñ–ª -->
                                                <td>
                                                    <template if:false={m._isEditing}>
                                                        {m.dept}
                                                    </template>
                                                    <template if:true={m._isEditing}>
                                                        <lightning-input
                                                                data-type="manager"
                                                                data-id={m.id}
                                                                label="–í—ñ–¥–¥—ñ–ª"
                                                                data-name="dept"
                                                                disabled
                                                                value={m._draft.dept}
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                </td>

                                                <!-- –¢–µ–ª–µ—Ñ–æ–Ω -->
                                                <td>
                                                    <template if:false={m._isEditing}>
                                                        {m.phone}
                                                    </template>
                                                    <template if:true={m._isEditing}>
                                                        <lightning-input
                                                                data-type="manager"
                                                                required
                                                                data-id={m.id}
                                                                label="–¢–µ–ª–µ—Ñ–æ–Ω"
                                                                data-name="phone"
                                                                value={m._draft.phone}
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                </td>

                                                <!-- Email -->
                                                <td>
                                                    <template if:false={m._isEditing}>
                                                        {m.email}
                                                    </template>
                                                    <template if:true={m._isEditing}>
                                                        <lightning-input
                                                                type="email"
                                                                data-type="manager"
                                                                label="Email"
                                                                data-id={m.id}
                                                                data-name="email"
                                                                value={m._draft.email}
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                </td>

                                                <!-- –î—ñ—ó -->
                                                <td class="actions-cell">
                                                    <!-- –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è: –ó–±–µ—Ä–µ–≥—Ç–∏ + –•—Ä–µ—Å—Ç–∏–∫ -->
                                                    <template if:true={m._isEditing}>
                                                        <button class="chip-save"
                                                                data-type="manager"
                                                                data-id={m.id}
                                                                onclick={handleRowSave}>
                                                            –ó–±–µ—Ä–µ–≥—Ç–∏
                                                        </button>
                                                        <button class="icon-button cancel"
                                                                data-type="manager"
                                                                data-id={m.id}
                                                                onclick={cancelRowEdit}
                                                                title="–°–∫–∞—Å—É–≤–∞—Ç–∏"
                                                                aria-label="–°–∫–∞—Å—É–≤–∞—Ç–∏">
                                                            <!-- —Ç–≤—ñ–π –∫—Ä—É–≥–ª–∏–π —Ö—Ä–µ—Å—Ç–∏–∫ -->
                                                            <svg fill="#000000" viewBox="0 0 32 32" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM16 6c-5.522 0-10 4.478-10 10s4.478 10 10 10c5.523 0 10-4.478 10-10s-4.477-10-10-10zM20.537 19.535l-1.014 1.014c-.186.186-.488.186-.675 0l-2.87-2.87-2.87 2.87c-.187.186-.488.186-.675 0l-1.014-1.014c-.186-.186-.186-.488 0-.675l2.871-2.869-2.871-2.87c-.186-.187-.186-.489 0-.676l1.014-1.013c.187-.187.488-.187.675 0l2.87 2.87 2.87-2.87c.187-.187.489-.187.675 0l1.014 1.013c.186.187.186.489 0 .676l-2.871 2.87 2.871 2.869c.186.187.186.49 0 .675z"></path>
                                                            </svg>
                                                        </button>
                                                    </template>

                                                    <!-- –ó–≤–∏—á–∞–π–Ω–∏–π —Ä–µ–∂–∏–º: ‚úèÔ∏è + –º—É—Å–æ—Ä–∫–∞/–ø–æ–≤–µ—Ä–Ω—É—Ç–∏ -->
                                                    <template if:false={m._isEditing}>
                                                        <button class="icon-button edit"
                                                                data-type="manager"
                                                                data-id={m.id}
                                                                onclick={startRowEdit}
                                                                title="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏"
                                                                aria-label="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏">
                                                            <svg viewBox="0 0 24 24" class="icon-24" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M21.28 6.4L11.74 15.94c-.95.95-3.77 1.39-4.4.76-.63-.63-.2-3.45.75-4.4L17.64 2.75a3.2 3.2 0 014.57 4.57z" fill="none" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                                                <path d="M11 4H6a4 4 0 00-4 4v10a4 4 0 004 4h11c2.21 0 3-1.8 3-4v-5" fill="none" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                                            </svg>
                                                        </button>

                                                        <template if:true={m.showDeleteIcon}>
                                                            <button class="icon-button"
                                                                    data-type="manager"
                                                                    data-id={m.id}
                                                                    onclick={toggleMarkRemove}
                                                                    title="–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è"
                                                                    aria-label="–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è">
                                                                <svg viewBox="0 0 24 24" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M10 12V17M14 12V17M4 7H20M6 10V18c0 1.66 1.34 3 3 3h6c1.66 0 3-1.34 3-3V10M9 5c0-1.1.9-2 2-2h2a2 2 0 012 2v2H9V5z"
                                                                          fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                                </svg>
                                                            </button>
                                                        </template>

                                                        <template if:true={m.showReturnIcon}>
                                                            <button class="icon-button"
                                                                    data-type="manager"
                                                                    data-id={m.id}
                                                                    onclick={toggleMarkRemove}
                                                                    title="–ü–æ–≤–µ—Ä–Ω—É—Ç–∏"
                                                                    aria-label="–ü–æ–≤–µ—Ä–Ω—É—Ç–∏">
                                                                <svg viewBox="0 0 32 32" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M0 21.984q.032-.8.608-1.376l4-4a2 2 0 012.496-.448c.64.32.896.8.896 1.376v1.984h18.016a2 2 0 002-1.984v-8a2 2 0 00-2-2.016h-16a2 2 0 01-1.888-2.56A2 2 0 018.128 4h16a6 6 0 016 6v8a6 6 0 01-6 6H8.112v2.016a2 2 0 01-3.392 1.408–ª-4-4A2 2 0 010 21.984z" fill="#000"></path>
                                                                </svg>
                                                            </button>
                                                        </template>
                                                    </template>
                                                </td>
                                            </tr>
                                        </template>

                                        <template if:true={editManagersEmpty}>
                                            <tr><td colspan="6" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                                        </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>


                            <!-- –ö–æ–Ω—Ç—Ä–∞–∫—Ç–∏ (—Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥) -->


                            <!-- –ú–∞—à–∏–Ω–∏ ‚Äî –∑–∞–≥–ª—É—à–∫–∞ -->
                            <!-- –ú–∞—à–∏–Ω–∏ (—É –º–æ–¥–∞–ª—Ü—ñ) -->
                            <!-- –ú–∞—à–∏–Ω–∏ (—É –º–æ–¥–∞–ª—Ü—ñ) -->
                            <div class="section-list">
                                <div class="head">
                                    <h3>–ú–∞—à–∏–Ω–∏</h3>
                                    <div class="action-row">
                                        <button class="secondary-button" onclick={addVehicleInModal}>+ –î–æ–¥–∞—Ç–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∏–π –∑–∞—Å—ñ–±</button>
                                    </div>
                                </div>

                                <div class="table-wrapper">
                                    <table class="drivers-table">
                                        <thead>
                                        <tr>
                                            <th>–î–µ—Ä–∂. –Ω–æ–º–µ—Ä</th>
                                            <th>–ú–∞—Ä–∫–∞ / –ú–æ–¥–µ–ª—å</th>
                                            <th>–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É</th>
                                            <th>–¢–æ–Ω–Ω–∞–∂, —Ç</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <template for:each={editVehicles} for:item="v">
                                            <tr key={v.id} class={v.rowClass}>
                                                <!-- –î–µ—Ä–∂. –Ω–æ–º–µ—Ä -->
                                                <td class="left">
                                                    <template if:true={v._isEditing}>
                                                        <lightning-input
                                                                data-type="vehicle" data-id={v.id} data-name="plateNumber"
                                                                label="–î–µ—Ä–∂. –Ω–æ–º–µ—Ä *" value={v._draft.plateNumber} required
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                    <template if:false={v._isEditing}>
                                                        {v.plateNumber}
                                                    </template>
                                                </td>

                                                <!-- –ú–∞—Ä–∫–∞/–º–æ–¥–µ–ª—å -->
                                                <td>
                                                    <template if:true={v._isEditing}>
                                                        <lightning-input
                                                                data-type="vehicle" data-id={v.id} data-name="model"
                                                                label="–ú–∞—Ä–∫–∞/–ú–æ–¥–µ–ª—å" value={v._draft.model} required
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                    <template if:false={v._isEditing}>
                                                        {v.model}
                                                    </template>
                                                </td>

                                                <!-- –¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É (–ø—ñ–∫–ª—ñ—Å—Ç) -->
                                                <td>
                                                    <template if:true={v._isEditing}>
                                                        <div class="combo-wrap">
                                                            <lightning-combobox
                                                                    data-type="vehicle" data-id={v.id} data-name="type"
                                                                    label="–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç—É" value={v._draft.type} required
                                                                    options={typeOptions}
                                                                    onchange={handleRowDraftInput}>
                                                            </lightning-combobox>
                                                        </div>
                                                    </template>
                                                    <template if:false={v._isEditing}>
                                                        {v.type}
                                                    </template>
                                                </td>

                                                <!-- –¢–æ–Ω–Ω–∞–∂ -->
                                                <td>
                                                    <template if:true={v._isEditing}>
                                                        <lightning-input
                                                                type="number" step="0.01"
                                                                data-type="vehicle" data-id={v.id} data-name="tonnage"
                                                                label="–¢–æ–Ω–Ω–∞–∂, —Ç" value={v._draft.tonnage} required
                                                                onchange={handleRowDraftInput}>
                                                        </lightning-input>
                                                    </template>
                                                    <template if:false={v._isEditing}>
                                                        {v.tonnage}
                                                    </template>
                                                </td>

                                                <!-- –î—ñ—ó -->
                                                <td class="actions-cell">
                                                    <template if:true={v._isEditing}>
                                                        <button class="chip-save" data-type="vehicle" data-id={v.id} onclick={handleRowSave}>–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                                                        <button class="icon-button cancel" data-type="vehicle" data-id={v.id} onclick={cancelRowEdit}
                                                                title="–°–∫–∞—Å—É–≤–∞—Ç–∏" aria-label="–°–∫–∞—Å—É–≤–∞—Ç–∏">
                                                            <!-- —Ö—Ä–µ—Å—Ç–∏–∫ -->
                                                            <svg viewBox="0 0 32 32" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13zM16 6c-5.522 0-10 4.478-10 10s4.478 10 10 10c5.523 0 10-4.478 10-10s-4.477-10-10-10zM20.537 19.535l-1.014 1.014c-.186.186-.488.186-.675 0l-2.87-2.87-2.87 2.87c-.187.186-.488.186-.675 0l-1.014-1.014c-.186-.186-.186-.488 0-.675l2.871-2.869-2.871-2.87c-.186-.187-.186-.489 0-.676l1.014-1.013c.187-.187.488-.187.675 0l2.87 2.87 2.87-2.87c.187-.187.489-.187.675 0l1.014 1.013c.186.187.186.489 0 .676l-2.871 2.87 2.871 2.869c.186.187.186.49 0 .675z"></path>
                                                            </svg>
                                                        </button>
                                                    </template>

                                                    <template if:false={v._isEditing}>
                                                        <button class="icon-button edit" data-type="vehicle" data-id={v.id} onclick={startRowEdit}
                                                                title="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏" aria-label="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏">
                                                            <svg viewBox="0 0 24 24" class="icon-24" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M21.28 6.4L11.74 15.94c-.95.95-3.77 1.39-4.4.76-.63-.63-.2-3.45.75-4.4L17.64 2.75a3.2 3.2 0 014.57 4.57z" fill="none" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                                <path d="M11 4H6a4 4 0 00-4 4v10a4 4 0 004 4h11c2.21 0 3-1.8 3-4v-5" fill="none" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                            </svg>
                                                        </button>

                                                        <!-- –í—ñ–¥–≤‚Äô—è–∑–∞—Ç–∏ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è —ñ—Å–Ω—É—é—á–∏—Ö, –Ω–µ –¥–ª—è _isNew) -->
                                                        <template if:true={v.showDeleteIcon}>
                                                            <button class="icon-button" data-type="vehicle" data-id={v.id} onclick={toggleMarkRemove} title="–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è" aria-label="–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è">
                                                                <svg viewBox="0 0 24 24" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M10 12V17M14 12V17M4 7H20M6 10V18c0 1.66 1.34 3 3 3h6c1.66 0 3-1.34 3-3V10M9 5c0-1.1.9-2 2-2h2a2 2 0 012 2v2H9V5z"
                                                                          fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                                                </svg>
                                                            </button>
                                                        </template>
                                                        <template if:true={v.showReturnIcon}>
                                                            <button class="icon-button"
                                                                    data-type="vehicle"
                                                                    data-id={v.id}
                                                                    onclick={toggleMarkRemove}
                                                                    title="–ü–æ–≤–µ—Ä–Ω—É—Ç–∏"
                                                                    aria-label="–ü–æ–≤–µ—Ä–Ω—É—Ç–∏">
                                                                <svg viewBox="0 0 32 32" class="icon-20" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M0 21.984q.032-.8.608-1.376l4-4a2 2 0 012.496-.448c.64.32.896.8.896 1.376v1.984h18.016a2 2 0 002-1.984v-8a2 2 0 00-2-2.016h-16a2 2 0 01-1.888-2.56A2 2 0 018.128 4h16a6 6 0 016 6v8a6 6 0 01-6 6H8.112v2.016a2 2 0 01-3.392 1.408–ª-4-4A2 2 0 010 21.984z" fill="#000"></path>
                                                                </svg>
                                                            </button>
                                                        </template>
                                                    </template>
                                                </td>
                                            </tr>
                                        </template>

                                        <template if:true={editVehiclesEmpty}>
                                            <tr><td colspan="5" class="sp-empty-row">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</td></tr>
                                        </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>


                        </div>

                        <div class="modal-footer">
                            <button class="secondary-button" onclick={closeEditModal} disabled={saving}>–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                            <button class="primary-button" onclick={saveEditModal} disabled={saving}>–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                        </div>

                        <template if:true={saving}>
                            <div class="saving-overlay" role="status" aria-live="polite">
                                <lightning-spinner size="large" variant="brand" alternative-text="–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è‚Ä¶"></lightning-spinner>
                                <div class="saving-text">–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è‚Ä¶</div>
                            </div>
                        </template>

                    </div>
                </div>
            </template>

        </main>
    </div>

    <template if:true={showConfirmDeactivate}>
        <section class="modal-overlay" role="dialog" aria-modal="true">
            <div class="modal-window">
                <h3>–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è</h3>
                <p>
                    –í–∏ –¥—ñ–π—Å–Ω–æ —Ö–æ—á–µ—Ç–µ –¥–µ–∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ —Ü—å–æ–≥–æ –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞?<br/>
                    –ü—ñ—Å–ª—è –¥–µ–∞–∫—Ç–∏–≤–∞—Ü—ñ—ó –≤—ñ–Ω –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏–º–µ—Ç—å—Å—è —É —Å–ø–∏—Å–∫—É. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –π–æ–≥–æ –∑–º–æ–∂–µ –ª–∏—à–µ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä.
                </p>
                <div class="modal-actions">
                    <button class="btn-danger" onclick={confirmDeactivate}>–î–µ–∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏</button>
                    <button class="btn-secondary" onclick={cancelDeactivate}>–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                </div>
            </div>
        </section>
    </template>


<!--–í–Ü–ö–ù–û –†–ï–î–ê–ì–£–í–ê–ù–ù–Ø SUPPLIER-->



</template>