:host {
    display: block;
    box-sizing: border-box;

    /* Тема/змінні */
    --bg: #f9fafb;
    --panel-bg: #ffffff;
    --panel-border: #e6e8eb;
    --panel-shadow: 0 2px 10px rgba(0,0,0,.05);

    --text: #1f2328;
    --text-2: #2b2f36;
    --text-muted: #8a94a6;

    --brand: #ffe019;
    --brand-border: #e6cf00;

    --ok-bg: #eef9f1;
    --ok-text: #165b28;
    --ok-border: #d5f0da;

    --warn-bg: #fff7e6;
    --warn-text: #7a4d00;
    --warn-border: #ffe4b3;

    --info-bg: #f6f8fb;
    --info-text: #2b2f36;
    --info-border: #e3e6eb;

    --hover: #fffdf2;
    --active-bg: #fff8c7;

    --row-filled: rgba(46, 170, 79, 0.08);
    --row-empty: rgba(250, 204, 21, 0.10);
    --row-over: rgba(239, 68, 68, 0.12);

    --radius-sm: 8px;
    --radius-md: 10px;
    --radius-lg: 12px;
}

/* Контейнер */
.sp-wrapper {
    display: grid;
    grid-template-columns: 360px 1fr;
    gap: 20px;
    padding: 24px;
    background: var(--bg);
}

/* ===== Ліва панель ===== */
.sp-left {
    background: var(--panel-bg);
    border: 1px solid var(--panel-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--panel-shadow);
    padding: 12px;
    overflow: auto;
}
.sp-left-head {
    position: sticky; top: 0;
    background: var(--panel-bg);
    padding-bottom: 10px;
    z-index: 2;
}
.head-row { display: flex; align-items: center; gap: 8px; }
.sp-tools { display: flex; gap: 6px; }

.sp-search {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #d7dbe0;
    border-radius: var(--radius-sm);
    font-size: 14px;
    outline: none;
}
.sp-search:focus {
    border-color: var(--brand);
    box-shadow: 0 0 0 3px rgba(255,224,25,.25);
}

.icon-btn {
    background: #fff;
    border: 1px solid #d7dbe0;
    border-radius: var(--radius-sm);
    padding: 6px;
    cursor: pointer;
    display: inline-flex; align-items: center; justify-content: center;
    transition: background .15s ease, border-color .15s ease, transform .02s ease;
}
.icon-btn:hover { background: #f4f7fb; }
.icon-btn:active { transform: translateY(1px); }
.icon-btn:focus-visible { outline: 2px solid var(--brand); outline-offset: 2px; }
.icon-btn svg { width: 18px; height: 18px; color: #2b2f36; }

/* Списки */
.sp-list, .items-list { list-style: none; margin: 8px 0 0; padding: 0; }
.items-list { margin-left: 18px; border-left: 1px dashed var(--panel-border); }
.group-li { margin-left: 14px; }

/* Рядки (рік/місяць/декада) */
.group-row {
    display: flex; align-items: center; gap: 8px;
    padding: 8px 10px; margin: 4px 0;
    border-radius: var(--radius-sm);
    border: 1px solid transparent;
    background: #fff; font-size: 13px; cursor: pointer;
    transition: background .15s ease, border-color .15s ease, color .15s ease;
}
.group-row:hover { background: var(--hover); }
.group-row.active {
    border-color: var(--brand);
    background: var(--active-bg);
    font-weight: 600;
}
.group-title { font-weight: 700; font-size: 13px; color: var(--text-2); }

/* Листя (дні) */
.sp-item {
    display: flex; align-items: center; justify-content: space-between;
    padding: 8px 10px; margin: 4px 0;
    border-radius: var(--radius-sm);
    border: 1px solid transparent;
    background: #fff; font-size: 13px; cursor: pointer;
    transition: background .15s ease, border-color .15s ease;
}
.sp-item:hover { background: var(--hover); }
.sp-item.active { border-color: var(--brand); background: var(--active-bg); font-weight: 600; }
.item-name {
    overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 220px;
}

/* Каретка */
.caret {
    width: 0; height: 0;
    border-left: 8px solid #666;
    border-top: 6px solid transparent; border-bottom: 6px solid transparent;
    transform: rotate(0deg);
    transition: transform .15s ease, border-left-color .15s ease;
    cursor: pointer; padding-right: 5px;
}
.caret.open { transform: rotate(90deg); }
.caret:hover { border-left-color: #000; }
.caret:focus-visible { outline: 2px solid var(--brand); outline-offset: 2px; }
.caret.empty { border: none; width: 12px; height: 12px; }

/* ===== Права панель ===== */
.sp-right { min-height: 420px; }
.intro-placeholder {
    color: #737a86; text-align: center;
    padding: 40px 12px; border-radius: var(--radius-lg);
    background: #f6f7f9; border: 1px dashed #d7dbe0;
}

/* Tab header */
.tab-header {
    margin-bottom: 1rem; padding: 1rem 1.5rem;
    background: #fffbea; border-left: 5px solid #ffc200; border-radius: 8px;
}
.tab-title { margin: 0; font-size: 1.4rem; font-weight: 700; color: #222; }
.tab-subtitle { margin: .5rem 0 0; font-size: .95rem; line-height: 1.4; color: #444; }

/* ===== Card ===== */
.card {
    background: var(--panel-bg);
    border: 1px solid var(--panel-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--panel-shadow);
    padding: 16px;
    margin-bottom: 18px;
}
.card.table-card { padding: 0; overflow: hidden; }

.card-head {
    display: flex; align-items: center; justify-content: space-between;
    padding: 12px 14px; border-bottom: 1px solid var(--panel-border); background: var(--info-bg);
}
.card-title { margin: 0; font-size: 15px; font-weight: 700; color: #222; }

.info-bar {
    display: flex; align-items: center; gap: 8px; margin-left: auto; flex-wrap: wrap;
}
.pill {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 6px 10px; border-radius: 999px;
    background: #eef0f3; color: var(--text); font-size: 12px; border: 1px solid var(--info-border);
}
.pill b { font-weight: 700; }
.pill.ok { background: var(--ok-bg); color: var(--ok-text); border-color: var(--ok-border); }
.pill.warn { background: var(--warn-bg); color: var(--warn-text); border-color: var(--warn-border); }
.pill.light { background: var(--info-bg); color: var(--info-text); border-color: var(--info-border); }

/* ===== Таблиця ===== */
.table-wrapper { overflow: auto; max-height: 80vh; }

/* липкий заголовок і перша колонка */
.nice-table {
    width: 100%; border-collapse: separate; border-spacing: 0; font-size: 14px;
}
.nice-table thead th {
    position: sticky; top: 0; z-index: 3;
    background: var(--info-bg); color: var(--info-text);
    font-weight: 700; padding: 12px 14px; border-bottom: 1px solid var(--panel-border);
}
.nice-table tbody td {
    padding: 12px 14px; border-bottom: 1px solid #eef0f3; background: #fff;
}
.nice-table tbody tr:hover td { background: var(--hover); }

/* перша колонка липка і в thead, і в tbody */
.nice-table .sticky-col {
    position: sticky; left: 0; z-index: 2; background: #fff;
    box-shadow: 1px 0 0 var(--panel-border);
}
.nice-table thead .sticky-col {
    background: var(--info-bg); z-index: 4; /* поверх body */
}

/* вирівнювання */
.left { text-align: left; }
.mono { text-align: center; }

/* ширина й центрування числових колонок */
.col-limit, .col-incoming, .col-remaining { width: 160px; text-align: center; }
.nice-table td.col-limit, .nice-table td.col-incoming, .nice-table td.col-remaining { text-align: center; }
.nice-table th.col-limit, .nice-table th.col-incoming, .nice-table th.col-remaining { text-align: center; }

.empty-cell {
    text-align: center; padding: 18px 12px; color: var(--text-muted); font-style: italic;
}

/* ===== Кнопки ===== */
.primary-button, .main-button {
    background: var(--brand); border: 1px solid var(--brand-border);
    border-radius: var(--radius-sm); padding: 8px 12px;
    font-weight: 700; cursor: pointer;
    transition: filter .15s ease, transform .02s ease;
}
.primary-button:hover, .main-button:hover { filter: brightness(0.98); }
.primary-button:active, .main-button:active { transform: translateY(1px); }
.primary-button:disabled, .main-button:disabled { opacity: .6; cursor: not-allowed; }

.secondary-button {
    background: #fff; border: 1px solid #d7dbe0; border-radius: var(--radius-sm);
    padding: 8px 12px; cursor: pointer; transition: background .15s ease, transform .02s ease;
}
.secondary-button:hover { background: #f6f8fb; }
.secondary-button:active { transform: translateY(1px); }

.btn-row { display: flex; gap: 8px; }

/* ===== Стан рядків ===== */
.row-filled td { background: #f5fff6 !important; }
.row-empty td { background: #fff !important; }
.row-filled { background: var(--row-filled) !important; }
.row-empty { background: var(--row-empty) !important; }
.row-over td { background: var(--row-over) !important; }

/* ===== Модалка копіювання ===== */
.modal-overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,.35);
    display: flex; align-items: center; justify-content: center;
    z-index: 9999;
}
.modal-window {
    background: #fff; border-radius: var(--radius-md);
    padding: 16px 20px;
    min-width: 520px; max-width: 90vw; height: 70vh; overflow: auto;
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
}
.modal-window h2 { margin: 0; font-size: 18px; font-weight: 700; color: var(--text); }
.modal-actions {
    display: flex; gap: 8px; align-items: center; justify-content: flex-end;
}

/* рядки в модалці */
.info-list {
    display: flex; align-items: center; gap: 8px;
    padding: 6px 4px; border-bottom: 1px dashed #eef0f3;
}
.info-list:last-child { border-bottom: none; }

.empty-state {
    padding: 8px 0; text-align: center; color: var(--text-muted);
}

/* Утиліти відступів */
.mt-8 { margin-top: 8px; }
.mt-16 { margin-top: 16px; }

/* ===== Скелетон ===== */
.table-skeleton { padding: 14px; }
.sk-row {
    height: 14px;
    background: linear-gradient(90deg,#f3f4f6 25%,#e9edf3 37%,#f3f4f6 63%);
    background-size: 400% 100%;
    border-radius: 6px; margin: 10px 0; animation: shimmer 1.2s infinite;
}
@keyframes shimmer { 0%{background-position:100% 0} 100%{background-position:0 0} }

/* ===== Адаптив ===== */
@media (max-width: 1100px) {
    .sp-wrapper {
        grid-template-columns: 1fr;
    }
    .table-wrapper {
        max-height: 65vh;
    }
}

.loading-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 0;
}
.loading-msg {
    font-size: 14px;
    color: #444;
}

.modal-loading{
    display:flex;
    align-items:center;
    gap:10px;
    padding:8px 0;
}

.loading-msg{
    position: fixed;
    left: 50%;
    top: 65%;
    transform: translate(-50%, -50%);
    z-index: 10001;             /* вище за .modal-overlay (у тебе 9999) */
    font-size: 26px;            /* більший текст */
    font-weight: 700;
    line-height: 1.2;
    color: #111827;
    padding: 14px 18px;
    border-radius: 12px;
    background: rgba(255,255,255,0.96);   /* читабельність на будь-якому фоні */
    box-shadow: 0 10px 30px rgba(0,0,0,.15);
    pointer-events: none;       /* не блокує кліки по модалці/оверлею */
}