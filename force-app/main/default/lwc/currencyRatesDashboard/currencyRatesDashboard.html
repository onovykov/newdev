<!-- file: lwc/currencyRatesDashboard/currencyRatesDashboard.html -->
<template>
  <lightning-card icon-name="utility:currency" title={title}>
    <div class="slds-p-around_small">
      <template if:true={hasData}>
        <div class="slds-text-color_weak slds-m-bottom_x-small">
          Оновлено:&nbsp;
          <lightning-formatted-date-time
            value={generatedAt}
            year="numeric" month="2-digit" day="2-digit"
            hour="2-digit" minute="2-digit">
          </lightning-formatted-date-time>
        </div>

        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_fixed-layout">
          <thead>
            <tr>
              <th style="width: 90px;">ISO</th>
              <th>Курс</th>
              <th>Остання зміна</th>
            </tr>
          </thead>
          <tbody>
            <template for:each={data} for:item="row">
              <tr key={row.id}>
                <td><strong>{row.iso}</strong></td>
                <td>{row.rate}</td>
                <td>
                  <lightning-formatted-date-time
                    value={row.lastModified}
                    year="numeric" month="2-digit" day="2-digit"
                    hour="2-digit" minute="2-digit">
                  </lightning-formatted-date-time>
                </td>
              </tr>
            </template>
          </tbody>
        </table>
      </template>
      <template if:false={hasData}>
        <div class="slds-text-color_weak">Немає активних валют для відображення.</div>
      </template>
    </div>

    <div slot="actions" class="slds-grid slds-grid_vertical-align-center slds-grid_align-end slds-p-right_small">
      <lightning-button label="Оновити" onclick={handleRefresh} variant="neutral" class="slds-m-right_x-small"></lightning-button>
      <lightning-button label="Оновити online з НБУ" onclick={handleUpdateOnline} variant="brand"></lightning-button>
    </div>

    <template if:true={updating}>
      <lightning-spinner alternative-text="Оновлення..." size="small"></lightning-spinner>
    </template>
  </lightning-card>
</template>